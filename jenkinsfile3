pipeline {
    agent {
        docker {
           image 'python:3.8-slim-buster'
        }
    }
    stages {
       stage('install ansible') {
	     steps{
           sh """
		     sudo apt update 2>/dev/null | grep packages | cut -d ‘.’ -f 1
	         sudo apt install ansible
           """
		 }
       }
       stage('lance playbook pour chargement variables') {
	     steps{
           sh """
	         ansible-playbook -i hosts.yaml playbook.yaml
	       """
		 }
       }               
    }
}     